常见问题
--------------------------

__Q__ : _"Brython" 是什么意思?_

__A__ : <u>Br</u>owser P<u>ython</u>. 也来源于威尔士语"brittonic-speaking Celt".



__Q__ : _哪些浏览器支持 Brython ?_

__A__ : 所有现代浏览器，包括智能手机。生成的javascript会刻意避免使用新的语法，直到大多数浏览器都支持它。

注意，使用Firefox的性能通常比使用Chrome要好（有时要好得多）。



__Q__ : _与javascript或其他允许在浏览器中使用python的解决方案相比，brython的性能如何？_

__A__ : 与Javascript相比，不同程序之间的情况自然非常不同。
在发行版或[brython站点](http://brython.info/tests/js_console.html)上提供了一个javascript控制台，它可以用来评估javascript与编辑器中的python程序的程序的执行时间（取消选中“调试”框）。


这种差异是由两个因素造成的:

- 在浏览器中即时将python转换为javascript的时间。有个参考，模块datetime（2130行python代码）在普通PC上能在0.5秒内被解析并转换为javascript。
- brython生成的javascript代码必须符合python的规范，包括搜索属性的动态特性，这些javascript代码未被优化

与其他将python转换为javascript的解决方案相比，Pierre Quentel的博客上提供了一个基准（他是brython的创建者和主要开发人员）。它比较了brython、skulpt和pypy.js。在实现之间必须小心使用这种基准，但是在测试了特性之后，brython通常比pypy.js快，它本身比skulpt快。在某些情况下，brython比python引用实现cpython更快。

brython存储库包含一个脚本，地址为localhost:8000/speed，用于比较本地计算机上bython和cpython的速度，以进行各种基本操作。

__Q__ : _当我运行brython脚本时，我在浏览器控制台中看到很多404错误，这是为什么呢？_

__A__ : 这是因为Bryton实现“导入”机制的方式。当脚本必须导入模块x时，brython会在不同的目录中搜索文件或包：标准库（javascript模块的目录libs、python模块的lib）、目录lib/site包、当前页的目录。为此，Ajax调用被发送到匹配的URL；
如果找不到该文件，404错误消息将写入浏览器控制台，但错误会被brython捕获，brython继续搜索直到找到模块，或者如果尝试了所有路径但没有结果，则会引发importError。

__Q__ : _为什么在浏览器控制台中显示此消息：“由于主线程上的同步xmlhttpRequest对最终用户的体验有不利影响，因此不推荐使用它。如需更多帮助，请访问 http://xhr.spec.whatwg.org/" ?_

__A__ : 这也与导入或文件读取有关。为了实现这些操作，Bryton使用阻塞Ajax调用：在使用导入的模块之前，必须先加载它。浏览器供应商通常不会很快删除阻塞调用。

__Q__ : _是否可以预编译brython脚本以减少执行时间？_

__A__ : brython的设计非常简单，可以像javascript一样运行：将python代码放在HTML页面的<script>部分，加载页面，编辑代码，重新加载页面等。与其他项目不同，python代码由cpython脚本转换为javascript，因此每次修改都必须在重新加载页面之前运行此脚本。


预编译brython不是一个好主意的另一个原因是，生成的代码通常比原始的python源代码大10倍——这是遵守语言规范所付出的代价。加载页面需要更长的时间，而且我们还没有发现这比动态编译更快。

但是，由于版本3.6.0，标准库中脚本的预编译版本存储在附加到执行代码的浏览器的indexeddb数据库中。编译是在第一次导入脚本时执行的，或者如果自上次编译以来brytohn版本发生了更改，则执行编译。这大大提高了导入加载时间。

__Q__ : _为什么使用操作符`<=`来构建DOM元素树？这一点也不 pythonic !_

__A__ : python没有用于操作树的内置结构，即向树节点添加“子”或“兄弟”节点。对于这些操作，可以使用函数；brython提出的语法是使用运算符：这更容易键入（无括号）并且更可读。

若要添加同级节点，请使用运算符`+`

要添加子级，选择运算符`<=`，原因如下： 


- 它有一个左箭头的形状；请注意，python函数注释使用了一个新的操作符`->`，所以我们选择了左箭头
- 因为有等号，它看起来像一个增强的赋值
- 它不能与“小于或等于”混淆，如果`document <= elt` 代表的意思是“小于或等于”，则该行没有意义，“小于或等于”通常用于条件或函数的返回值。
- 我们习惯于将2个符号`<`和`=`解释为“小于或等于”，以至于忘记了它们是编程语言的约定，从而取代了真正的符号`≤`
- 在python中，`<=`与“小于或等于”是含义不同的集合的运算符。
- 符号`<`通常在计算机科学中用于表示“小于”以外的内容：在python和许多其他语言中，`<<`表示左移位；在html标记中，`<`和`>`
- Python对非常不同的操作使用相同的运算符`%`：modulo和string格式
